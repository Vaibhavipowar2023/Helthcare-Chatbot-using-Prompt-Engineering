# -*- coding: utf-8 -*-
"""app.py

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1ezB5HbqN80lJauVETTaBzYu8IxSOdtDY
"""

!pip install streamlit pyngrok

# Commented out IPython magic to ensure Python compatibility.
# %%writefile app.py
# import os
# import google.generativeai as genai
# import streamlit as st
# from pyngrok import ngrok
# 
# # Set up the API key
# os.environ['API_KEY'] = "AIzaSyCkILr75-SYIXXe_5lkHLmQzCjG5lmUC_g"
# genai.configure(api_key=os.environ['API_KEY'])
# 
# # Load the model
# model = genai.GenerativeModel(model_name="gemini-1.5-flash")
# 
# # Function to interact with the healthcare chatbot
# def generate_healthcare_response(user_input):
#     prompt = f"""
#     You are a healthcare assistant with knowledge of medical conditions, treatments, and wellness.
#     - Respond only to questions related to healthcare, medicine, or wellness.
#     - If the user asks about anything outside of healthcare (e.g., sports, entertainment, personal matters), politely inform them that you can only provide healthcare information.
#     - Provide accurate, helpful, and concise information.
#     - Always respond in a friendly and empathetic tone.
# 
#     User's question: {user_input}
#     """
# 
#     # Generate response based on healthcare prompt
#     response = model.generate_content(
#         contents=[{"role": "user", "parts": [{"text": prompt}]}],
#         generation_config={"temperature": 0.7}  # Control creativity
#     )
# 
#     assistant_reply = response.candidates[0].content
#     return assistant_reply
# 
# 
# # Streamlit UI inside a container
# st.markdown("""
#     <style>
#     /* Overall container styling */
#     .chatbox-container {
#         border: 2px solid #4CAF50; /* Green border */
#         border-radius: 15px;
#         padding: 20px;
#         background-color: #ffffff;  /* White background */
#         max-width: 600px;
#         margin: 0 auto;
#         box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
#         display: flex;
#         flex-direction: column;
#         height: 500px;
#         position: relative;
#     }
# 
#     /* Chat container styling */
#     .chat-container {
#         border: 1px solid #ddd;
#         border-radius: 10px;
#         padding: 20px;
#         background-color: #f9f9f9;
#         overflow-y: auto;
#         flex-grow: 1;
#         display: flex;
#         flex-direction: column-reverse; /* This ensures the chat starts from the bottom */
#         margin-bottom: 60px; /* Space for the input box */
#     }
# 
#     /* User input bubble style */
#     .user-bubble {
#         background-color: #4CAF50;
#         color: white;
#         padding: 12px;
#         border-radius: 15px;
#         margin: 10px 0;
#         max-width: 70%;
#         float: right;
#         clear: both;
#     }
# 
#     /* Chatbot response bubble style */
#     .bot-bubble {
#         background-color: #e0e0e0;
#         color: black;
#         padding: 12px;
#         border-radius: 15px;
#         margin: 10px 0;
#         max-width: 70%;
#         float: left;
#         clear: both;
#     }
# 
#     /* Clear both floating elements */
#     .clear {
#         clear: both;
#     }
# 
#     /* Custom text input box */
#     .stTextInput>div {
#         position: relative;
#         width: 100%;
#     }
# 
#     .stTextInput>div>input {
#         border: 2px solid #4CAF50;
#         border-radius: 10px;
#         padding: 10px;
#         width: 92%;
#         left: 4%;
#         padding-right: 40px; /* To make space for the button */
#     }
# 
#  /* Submit button with logo inside */
# .stButton>button {
#     background-color: #4CAF50; /* Background color */
#     color: white;
#     padding: 12px;
#     border-radius: 10px;
#     position: absolute;
#     bottom: 10px;
#     right: 10px;
#     width: 60px;
#     height: 60px;
#     font-weight: bold;
#     border: none;
#     background-image: url('https://www.google.com/imgres?q=submit%20button%20icon%20img&imgurl=http%3A%2F%2Fwww.clker.com%2Fcliparts%2F8%2FX%2Fy%2F7%2FJ%2Fp%2Fsubmit-button.svg.hi.png&imgrefurl=http%3A%2F%2Fwww.clker.com%2Fclipart-submit-button-7.html&docid=RtqN3_kO4urR4M&tbnid=lGBXVqGi4lOBxM&vet=12ahUKEwim_8m9pIKLAxVDd2wGHZGrNSsQM3oECEUQAA..i&w=600&h=300&hcb=2&ved=2ahUKEwim_8m9pIKLAxVDd2wGHZGrNSsQM3oECEUQAA'); /* Replace with your logo URL */
#     background-size: 30px; /* Adjust size of the logo */
#     background-repeat: no-repeat;
#     background-position: center;
#     cursor: pointer;
# }
# 
#    .title-container {
#     display: flex;
#     align-items: center;
#     justify-content: center; /* Centers the title and logo */
#     margin-bottom: 20px;
# }
# 
# .title-container img {
#     width: 80px; /* Adjust the size of the logo */
#     height: 80px;
#     margin-right: 0; /* Remove the space between the image and title */
#     border-radius: 50%;
#     object-fit: cover;
# }
#     </style>
# """, unsafe_allow_html=True)
# 
# # Initialize session state for storing messages if it does not exist
# if 'messages' not in st.session_state:
#     st.session_state['messages'] = []
# 
# # Create a form inside the container to make everything align together
# with st.form(key="healthcare_form", clear_on_submit=False):
#     # Title and introductory text inside the container with icon
#     st.markdown("""
#         <div class="title-container">
#             <h1>Healthcare Chatbot</h1>
#             <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAABJlBMVEX///+Z6v8OFC4AAB0AACIAACUPEy4AAB8AABf//v+a6P0EDSmFyt0jNU2Z7v8JCyYhJT+Dho8AABEAABoAABUXHjIAAAAAAA/Nz9JnaXhZW2WbnKEADiQACib4+f0GES9jYm6NjZcAACjd394AAAme8v/v8PR5eof+/vcOFSvX2t6W9P8ACCsuMUMOEzIAACzp6O1LTV28vcM8P06goKnHxs2trbTU1N24t8FPVV9CR10nKzo3OU10dH8qK0RiYnJqbYKytrZZXGMTHDeop7JHSlZzen45O0gxM0dHaHpllqh5s8QZKUeP0eUxR2B3o7s+YHsUGClppbk3W2yP3+wAHTNchJNfhqE5UWcREjcYGjhlprAuQ1I5RF9HaXd5u8yBvNddepP7LyzvAAAToElEQVR4nO1dDVvayNqOk8lMwihIEgmIJBJDYDCmiIC61bo9rbVq3Xbtbuv27Pv27P//E+8EBfIBghAQz5t73etqbWDmno/na555wnEJEiRIkCBBggQJEiRIkCBBggQJEiRIkCBBggQJEiRIsGBIkhT8+zP1Y27Q2f/24VGrXC4Xm4c2919IsdE6prKsKBgrskX2W43n7lCcYLOV37R4x0CAATEYpmJt5r2l+9x9iwOMRH1fhiAMwdqvc7Xn7l08aKmQogjDDIJa8bm7NjskTtILMgJDGAIKkLytv3SJI3H6LwKNsusBn+vP3cWZcay4jzAEcP+5Ozgrstpj/JhkVbIvW6K2rccJMoq59svdimxu9pwxBAFwXusvlyHXEYfI0DDkznN3dGpI3AkZT5CSi+fu6PRoaBNMIUW5F2ejPjhKjXwVTsCQ2W+n+Yb3iRdlwu20tvd48TFd74epwjdnrcOXI3Da1Tc5BZN7TU+Ex0EIAi7KEKio76rN5+u0dL+KHh/l7urMV7EMDabnCORVTXNPjjcLo3G2fwIsy1JMB1BKsKh+yEfDASN6U4t5zu16fbyVrHcONLb3UEZQxL3tYrNuT9ALvd5ka1rhmYPlulA5mUB56PW6HbedkM1YuTdj2taL67KD2OTJZuHtzhMb2On86qiYsI/L60X78Wc7e7mck42TocSdqUyzEas18gnmInRM3nCRI/PV9nSN6+0qr5mMI/+qxdVGLVWda+U8NcufTdXICLStrsxD8mjN1dxTEDJ4df9oWn+oqyyO9jWBjSVeHyV0JM7W7iVwLj65JHHVhyAEfjviEXtbdYBritt5bmq99jBp9W1FYIaOfDZ8NCXuSOn25XfzdLp2huLMvJ9DIRp2YP2qcR2IAXKszcNYWqtvWw6lkO8MDzm28P1wv9qMpbV7lPl7A0sbsjDYstnWXEDki/xYfTIZalz+xDKoIf9r6ILvbRmcjaGtXpN1DTH1jUrvIk0yRoevMRtxh0mhmNwgb7l2tthSFTYOo9NY09e7LhlS67G09oCWVaKug9vR3nBH2DGQfBy39dw4xgQQpRNhKHF5TChA8QbqJK5pImdvJyJEalzZcv9ymBqpxW43t2TCeJSHdKZx8grhZryWusRtucK/oktGr2oAwY38HAIREldfZ/JLDktMif23/cqgccch9S1DiMiumnSqAqTsjzFBpoa9jw2qFaKTtQ2NUtxhyCEMmUAo8C61CtLcomV6gS0Rfjvy+wUx5LhTmTno2fmFyhiJLFMNSkS1L4ahxGWVLsH5oiy7VAuP4oLm8L2GgFqNuZ0osmyhqiGTf/4MPXmWlxES4zQNh4MZxSoCWlATL2AOmU6CWxSeSYsIH50pTC/afpd+Iat03wRkbyEHR5J+QoBz7t+Ji2BYVBFSYjUMH0EDG0D1GzcLYFgXCVA73KIO/5oyMuT8QOsugOEBBPgDtzCGngte+sj1t+K8GUpcSwNkQ5+TKRMNJkqc/ppQfqAy5s7QZi6/NSpK0mh2ytnpUH7fbniB0CFWUjvHPOK+hzZnht2wDdweZqw13m/KOVVUoCDAp0PAqphTNztDXc1tgQ4CM/Oewx1MDVgPhpy9vzSPRdE0kHcag6YAuP+kyeP9JheJJjYgMJjwlhbCsGBSJeqYNi9yJutiBmJV5aeDoiowQylwtI9Hke8vKwAXHv48Z4Y7CiVOOKi+c+6FaQkWP11eXa9Oi+ury0+ykgHAsX4JKlsmbCgB4sMkzpWhtwspDk9hy4tVY23t6ia1W0lPj0p65eZqTcHUNbVWKO+tqCD4sBPnO4e6QpAY/Hp9m7n6GfG3a6+HM8Ljef2biijQCqFWIKI5ewEM36sAV31rlK2fA54i3v3M+KVSszJkFNnPLcAA4QM7YNdn2eJpzYWhp4L1LUA+lsudun7gbQcfQcnew5TKX1K7K6mVmaewy3EllU59UQEV9my/71LXkHNh1zvl8kkJOXqsyZt2a8/wzjyhov7uUieQqaWfC8BVripxcOsjla5cKS7gzwMRtWMTbW1YCo89ofaxZcfmuklFpBJPWSFkuAagwTBtgS1R+LmyGytDhsotn/H0g6+ptyLrQS/5wRFhOZY5ZL7ugez6s0Oo2Y8esmXynrn68ud4Z9ADm8VbDQDNF7+o2a+6A90D4k+iMeopUIdCIHEC4cHRpCQ1NALkq91Y9l8YlSsRkFxfL0qe6RZM4oDm4eyRvp1SODUtkKW1CRH8ygR8/PyY2Kp8EZBw3OcgcUdiqC/EnNELl3oHPX5YPcuYtdyWaca9Sc+uI4Yi/YeLDK3Zo8g2jOaGOlNyZ9MazIBRwgTJR98DBw4QP8cuZPrYvVXdQNrbQXi8kXA62zqty+FBA4OvlLi8CoS1eSzRe6QrK79lqD+SWDXDDKk227FQAYcJAuX94J/Zzlev5zeFnsqQgemLnhypkUw55qnOAJtHkdQ0q39YL9kaQn/Oboo+htSnjGENzrbqVmTEAZzlcPaImU7hL9T0fgCqyUzUb7upMMV0peL9PIkJ+8DKsM9UvovIJ7z1XDQZEM+SgVuNXnUxSoN//gCp+jMsSNOp269ra2t3V6lJSabS6Zurr2uf1i5vU5WQ5qmsigCf9qJsErdhRBnOcnayL4S/zm+USnskI0QG/fYvFWcQwcqr7xPJIMYvfeUogmE4gvzj3+FhqTiEbEh9YbJpRhiWDqalx750I5LFTOFgxGyZCnchOZP+YmXuAy4gI6/9MQnFdMpzBylFCNEt9UvoI7t30NPAvTnMRsYcEDoDQxDN04YD9z4vAvitEujr7qXf6oB/VyYwBtL/49e5yv8GbNzU7ncM1MGFhWJ03wBnBobROczggSncFJFyGxjy3VvN/zASv41fqLvfRb/0oHLgK1OVWwWog7hUh48yRDMwjJgQbIwHkustj/jrAIP0m4xv2hEgws3YKbx5teXXcYj+CDBM/1T90jJimbJ9eDItQ4Ysjlw6Uwax7pbiiVI/wZ/hKzLiGM+YresrJdSE7B+19MqqCpTBummrEYZwFlnalMMEUZChGGBY+RY2geDdWIZ3EAUbYXvbt3nTqzLgH2WojEqYnAQ2NMIa1seww4fmsPIlfP0AueN848q7EMHgqKTTP4MM5QhD4anpyAEUhHCXfQzfKkgNiIXKXSb8OBonadJGeJmQu8DKv1b8ez88h8gVzmayvOu5cJf5QWt5jRlt/jmKzmHmzzGrdKXyKcwwqGMrVxjIA+/iKOTNIWLN5AN7/mGwA8gn1xoagJcBht9weMV9HbsPvwogIEs9U3fwQKpyCYHW6EdjOmGGXjrRTA6i/doMGN8ID5Iepb9I5oefQWo1bPprV2NX6a0akNfu77n/+L9zd50QLPUzH1shfVhCM0eG67gUGDPoS4LaNqnqV3jp9FomOMLGzViNnzKCGinDXOqBLE3f8Bn/8Xo2aNMQOHO2RK12aPilDfI3x0yoYCjYU89+gvLVePd497OG/OtUZuK5Pyyp3c9KV5T27NJAtA0JwmEcuQSNE79jTT4N2DcsVPrN1590uvJdHfjMFH+ZJMyfvlQGDDNyQHatVP42gF+WfOybTEzJKBexZCYzz6XI8wNbTB4w5A4IkFd9I55K737XeguVWHcTuU/p1BeL3g8LFcR/Au5TelVDZM/Xm1yfIBFxOa6wfo3TWweayGPMszUi7wxkV0cFgk9aen1L/1zToIAgVtc/TxYoZjP/+ZMMhQzE2tp/KgFnpPIFU9HnwzeYjy9g1hFZu2jZsSaDSI2jVjZbZE7/wEiSOH3DAUHDzZuSn9++/n13eR2JboxEqpK6vrz77e7bdcj/rTCj1P3dl4LcVKlZKGazraO4M+d7q6GugoEwlbxscySsDYnTeJiUX3ca07vsE+lQCIP5xgSpRZ++y0JDycfMrUdG6v7ogkH8QQN9z6TitzCZ1H2vn0Ax9fC4f95TK57f4bzxH7Cdm1QZnAvNheo+W5a+VSO12dbXfs4lZMqMbpGiwP0tWzWmj8pMiKICfFeD2CieYuAaq/OImVZWXUT7CSZdMG8ukiQRN/IygP7E4Jr+UaDCBjNd4j6dSd9sZBDcCCj0DwKQ83Hfjg1BX3dQsNUdg4CMuRrvGWklvbvqZJBROvTz0TcIeTf3ijZMX4RusOWZOYDw50o8aQr3SKc/QxdtqfmAymPOoXcuNGeGeS0T8DlZe3nRy1W4vNmNY6WmvUyM9B+XKgVEaQcFZkEA1vwroejrBPCNYDP1dWwwK+bbH5WVOCZy948rLCDXu04VQEMxCJ170q7k3bZkxn6wIXvTMkBGefXPajo9G0f2+dV//hJd15CP7ZDKK/I0zluVI9HIIeIGmvY2RkswDQp4ce2f25vU9Li5/mdNwRnqQlhkctrfCMetGyg3U9RpUpwxv/d95LeN04fkS1UU/lybDp8EtXsl3zVzhRAVNopHGhAWUFXKqy+nAePNsN+fYiZyCMpQmpkSlHlRSBCV0yG16qQ95qrN46LjEJyb3lF3qCnvr3Zn35AxZLbrNCgRIkBeo8edoYUjOyoSzhdUNYvZNeTdiLoUdr5V3bxYnw4fj7Ot9ojrmkyGIzl6D3kukLhNAeAR1w5juA48fJbKkArHM3/3pD3YsRDI1Yd1ReJmcWqk0XVb6rKBZov9Pg1ZDOD54prjuuftC9GFPegZJtcWV7hS4loqIMJCq0g2ZdcQFyS6GQ4V2rX3F8dQ4k555GzM65Z6uDF7z6F8YfyTsbZqvy65eDILY/aBP8OALGg4+2AuU45SOcuNd7glrn28ORznE+i3mnedGxhWPIVhnoT3MgFePYzxT7atEZXMchNp8JYVTIZeEJjiyooAiVETPPIk80bAcExQTrDGdZSMV3Ng8QX52OrcxBRZRxMsVDeSDdCFC8e2UuOOVIqU/ecqx3fOXInc0fjhLfNDGY5X4cxlygHXPNCfqaRiTT+AgITrHQxBI5JK3T09UoYafgG0VErhXrxHME8Co0iRVr0vsvAIskMoIvHxmiHeMUJWMwC8CEczFgr7HDNBtz+mxJ+kn0QT7pyx9QrsfdFww9e7Fo0adyYSyoNxYr/xI5w1CZ3GmJ7nNzBA6qYeewnIpyIrZ1xHzY65Sda4wID25I3roscPqCVPz6sOAlp1GYqadrQSMpSL/OMU9ayGexnMCGsfxizR+oFGkGG9X4L3YDBa9deKi0rW6aOWI3usamoKhljRYLX+eDDAruYc1+Vf15elmrleFR2m3oSWPaa8ar1TzpY7+UdFKONX5Hkv0WEpVmgXXuXZN9AFRPkxrvLoBLBbG6rLxmt9QWGniSAxyXDK9AHNYKH6SDBlbPlcjtvJCgoBFMBfl6s2NLOuAaFA8Dhav3R8l9sm+7guddk03p5b0HBdbz0wZbI0i7SLc9N16Zno5SY6Ctxv1Z+6XPXDzr6pCNQlorL5jgBhsZGusehorivnuZ0qL0KAXKhY62fF9qQ5Lzv5VuGNqBJEvaoMp3UvqQUtWbn91wa4v/9st7xa+pRSImBVEz6enWbLxdEoZ0/PTrClYoFtvgwA5kGrO/kdHjiRs5HnRFPuHgt1N453vUwQ4X0iHBGgAHk8EjwWTMf18vYIFE1mxe88fMu+gEZWwHkOFASgNrvaWaoxhsLpUeE1r/LQIF1L7ZGSLYaBiFfbXHn969sPgis/3FyutUUkLDi69hik11tGrzyttCPfJ4Y12q3Tg5KW0yxLHAFFVDVNFg6qrbZ3XFjGSO7pGv0HIRsThA8WhLpKne2HP/cYPigz3a4fHuZHol63uyPTfdrPkCtAIC/wnGIMmuLgWkuPoTTGKe5j8FSAYSdw3em50cGD3vRX6dPhYyh5uTP84kOIo1CESOtFbONieCgDvDwvLSviuBl2swXgvJP0JkfRd60lrjnML9UcdhQU+z70pNfy2G2HIuB7KyquVVrkvcuxy4IGJIOSgzEx3HS89LklcREl7oIA/OAuSTtaDAxrtkm8exbLYtNwWR70T6HimcMOj3B1iRgya7tb7dP78446A8Pu+w7Y1+hvCNLmc+1gShwPkkFmmkPtgWEWu+YSvfvRe8dFDqCH9+wU4fQMwUMmfsdyXWupptA7XTKQtd1utLctOgNDIG7mG4cFr9T8/GuhPxHn0EBQVBTTO3WZniEQVFVlXr94ri9JuPsBkmRvyq4LkPcO3KkZ8tSr70ozyFCPY38nVwwoyopgQu/8pesfPv0Lspi6WIGmIOeKy8evW36+mT3NNvUcINPFOo8dYNned3gvxVo6hr7jQ2bg5J58fOEFImXQvy66XHswDGYzC08WhF0diIaUJ15GNHhjdLXvUWDukooMvLMkpvYYlBVKnuzbdUQDKIvMkZ0F+jkGRN1v2rqtTwTOPtpUmXty8GJeQ26vC0x18xbdmAy/a7LDtOhGY7kFjB/2plbyYvmElIzHQQzDcQzvvcfa+dBrFkuKGte5sHhcKjnO2Bfmlra2iAnlSV4/ulyQ8uWzX04uDsa9txqdnJwcbJfb3hZ8KRPYRb+z0apHflCQe1G0opCGFUTzMzTmffl8/ngfLc7lxzOkN8eOE3OUsGGOkvCC3xx/D8+g3huaP9sFfPPiXhw/BJJ9Kir8kJeuYF47teN5N+vzgjFoDH23TrmzkEu9C8HLcBhmwdAD7/m9+fJZ8N/EJUGCBAkSJEiQIEGCBAkSJEiQIEGCBAkSJEiQIMH/W/wf3qotx+u6o9IAAAAASUVORK5CYII=" >
# 
#         </div>
#     """, unsafe_allow_html=True)
# 
#     st.write("Ask me anything about healthcare, medicine, or wellness!")
# 
#     # Take user input
#     user_input = st.text_input("You:" )
#     st.form_submit_button("Submit")
# 
#     # Display chat history and handle input/output
#     if user_input:
#         # Add user message to session state
#         st.session_state['messages'].append({"role": "user", "text": user_input})
# 
#         # Generate response based on user input
#         response = generate_healthcare_response(user_input)
# 
#         # Add bot response to session state
#         st.session_state['messages'].append({"role": "bot", "text": response})
# 
#     # Create a container for chat messages and display them
#     with st.container():
#         # Create a div with a class name 'chat-container' that holds the messages
#         for message in reversed(st.session_state['messages']):
#             if message['role'] == "user":
#                 st.markdown(f"<div class='user-bubble'>{message['text']}</div>", unsafe_allow_html=True)
#             else:
#                 st.markdown(f"<div class='bot-bubble'>{message['text']}</div>", unsafe_allow_html=True)
# 
#         st.markdown('<div class="clear"></div>', unsafe_allow_html=True)
# 
# 
# 
#

# Add your ngrok authtoken to authenticate your account
!ngrok authtoken 2rqsMWz1gE2i1ry658XfMJp0MNg_mCsC88mGXmZNYSAFLs1z

# Set up ngrok tunnel for Streamlit
from pyngrok import ngrok

# Create a public URL for the app
public_url = ngrok.connect(8501)
print(f"Streamlit app is live at: {public_url}")